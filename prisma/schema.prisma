generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  UID          String         @unique //fireabse UId is the only userId
  name         String
  email        String         @unique
  phone        String?
  photoUrl     String?
  createdAt    DateTime       @default(now())
  matchRequest MatchRequest[]
}

model MatchRequest {
  id          String            @id @default(uuid())
  userId      String
  videoUrl    String
  lineUpImage String?
  status      MatchStatus    @default(PENDING)
  cratedAt    DateTime       @default(now())
  updatedAt   DateTime       @updatedAt
  analysis    MatchAnalysis? @relation("MatchAnalysisToMatchRequest")
  user        User           @relation(fields: [userId], references: [UID])
  players     Player[]
}

model MatchAnalysis {
  id      String          @id @default(uuid())
  matchId String          @unique
  result  Json
  match   MatchRequest @relation("MatchAnalysisToMatchRequest", fields: [matchId], references: [id])
}

model Player {
  id             String          @id @default(uuid())
  matchRequestId String
  name           String
  jerseyNumber   Int
  position       String
  team           String?
  createdAt      DateTime     @default(now())
  matchRequest   MatchRequest @relation(fields: [matchRequestId], references: [id])
}

enum MatchStatus {
  PENDING
  PROCESSING
  COMPLETED
}
